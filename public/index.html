<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>Document</title>
	<link rel="stylesheet" href="css/bootstrap.css" />
	<script src="js/jquery.min.js"></script>
	<script src="js/popper.min.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<link rel="stylesheet" href="css/index.css">
</head>
<body>
<!-- 头部 -->
<div id="header"></div>
<!-- 轮播图 -->
<div id="d1">
	<div class="main">
			<div id="banner">
				<!-- 左边按钮 -->
				<div id="btn-left"></div>
				<!-- 图片轮播区域 -->
				<ul id="ul-imgs">
					<li><a href="javascript:;"><img src="images/banner1.png" alt=""></a></li>
					<li><a href="javascript:;"><img src="images/banner2.png" alt=""></a></li>
					<li><a href="javascript:;"><img src="images/banner3.png" alt=""></a></li>
					<li><a href="javascript:;"><img src="images/banner4.png" alt=""></a></li>
					<li><a href="javascript:;"><img src="images/banner1.png" alt=""></a></li>
				</ul>
				<!-- 小圆点 -->
				<ul id="ul-idxs">
					<li class="active"></li>
					<li></li>
					<li></li>
					<li></li>
				</ul>
				<!-- 右边按钮 -->
				<div id="btn-right"></div>
			</div>
	</div>
</div>
<!-- 各商品展示区 -->
<div class="d-shop">
<div class="shop"> 
	<div class="sp">
		<img src="images/c1.jpg" alt="">
		<div>
			<P>BRANDED SHOES</P>
			<button id="b2" class="btn b2">SHOP</button>
		</div>
	</div>

	<div class="sp">
		<img src="images/c2.jpg" alt="">
		<div>
			<P>BRANDED SHOES</P>
			<button class="btn b2">SHOP</button>
		</div>
	</div>

	<div class="sp">
		<img src="images/c3.jpg" alt="">
		<div>
			<P>BRANDED SHOES</P>
			<button class="btn b2">SHOP</button>
		</div>
	</div>

	<div class="sp">
		<img src="images/c3.jpg" alt="">
		<div>
			<P>BRANDED SHOES</P>
			<button class="btn b2">SHOP</button>
		</div>
	</div>
	
</div> 
</div>
<!-- featured products -->
<!-- 大横条 -->
<div class=" feat">
<h1>FEATURED PRODUCTS</h1>
</div>
<!-- shopping -->
<div class="shopping">
<div>
	<a href="">
		<img src="images/pic1.jpg" alt="">
		<h3>BRANDED SHOES</h3>
	</a>
	<div class="price">
		<p>￥300.00</p>
	</div>
	<div>
		<button class="btn b1">INDULGE</button>
	</div>
</div>
<div>
	<a href="">
		<img src="images/pic2.jpg" alt="">
		<h3>BRANDED SHOES</h3>
	</a>
	<div class="price">
		<p>￥300.00</p>
	</div>
	<div>
		<button class="btn b1">INDULGE</button>
	</div>
</div>
<div>
	<a href="">
		<img src="images/pic3.jpg" alt="">
		<h3>BRANDED SHOES</h3>
	</a>
	<div class="price">
			<p>￥300.00</p>
		</div>
		<div>
			<button class="btn b1">INDULGE</button>
		</div>
</div>

<div>
	<a href="">
		<img src="images/pic1.jpg" alt="">
		<h3>BRANDED SHOES</h3>
	</a>
	<div class="price">
			<p>￥300.00</p>
		</div>
		<div>
			<button class="btn b1">INDULGE</button>
		</div>
</div>
</div>
<div class="shopping">
	<div>
		<a href="">
			<img src="images/pic4.jpg" alt="">
			<h3>BRANDED SHOES</h3>
		</a>
		<div class="price">
			<p>￥300.00</p>
		</div>
		<div>
			<button class="btn b1">INDULGE</button>
		</div>
	</div>
	<div>
		<a href="">
			<img src="images/pic5.jpg" alt="">
			<h3>BRANDED SHOES</h3>
		</a>
		<div class="price">
			<p>￥300.00</p>
		</div>
		<div>
			<button class="btn b1">INDULGE</button>
		</div>
	</div>
	<div>
		<a href="">
			<img src="images/pic6.jpg" alt="">
			<h3>BRANDED SHOES</h3>
		</a>
		<div class="price">
				<p>￥300.00</p>
			</div>
			<div>
				<button class="btn b1">INDULGE</button>
			</div>
	</div>

	<div>
		<a href="">
			<img src="images/pic3.jpg" alt="">
			<h3>BRANDED SHOES</h3>
		</a>
		<div class="price">
				<p>￥300.00</p>
			</div>
			<div>
				<button class="btn b1">INDULGE</button>
			</div>
	</div>
</div>
<div class=" feat">
	<h1>FEATURED PRODUCTS</h1>
</div>
<!-- shopping -->
<div class="shopping">
<div>
	<a href="">
		<img src="images/pic1.jpg" alt="">
		<h3>BRANDED SHOES</h3>
	</a>
	<div class="price">
		<p>￥300.00</p>
	</div>
	<div>
		<button class="btn b1">INDULGE</button>
	</div>
</div>
<div>
	<a href="">
		<img src="images/pic2.jpg" alt="">
		<h3>BRANDED SHOES</h3>
	</a>
	<div class="price">
		<p>￥300.00</p>
	</div>
	<div>
		<button class="btn b1">INDULGE</button>
	</div>
</div>
<div>
	<a href="">
		<img src="images/pic3.jpg" alt="">
		<h3>BRANDED SHOES</h3>
	</a>
	<div class="price">
			<p>￥300.00</p>
		</div>
		<div>
			<button class="btn b1">INDULGE</button>
		</div>
</div>

<div>
	<a href="">
		<img src="images/pic1.jpg" alt="">
		<h3>BRANDED SHOES</h3>
	</a>
	<div class="price">
			<p>￥300.00</p>
		</div>
		<div>
			<button class="btn b1">INDULGE</button>
		</div>
</div>
</div>
<div class="shopping">
	<div>
		<a href="">
			<img src="images/pic4.jpg" alt="">
			<h3>BRANDED SHOES</h3>
		</a>
		<div class="price">
			<p>￥300.00</p>
		</div>
		<div>
			<button class="btn b1">INDULGE</button>
		</div>
	</div>
	<div>
		<a href="">
			<img src="images/pic5.jpg" alt="">
			<h3>BRANDED SHOES</h3>
		</a>
		<div class="price">
			<p>￥300.00</p>
		</div>
		<div>
			<button class="btn b1">INDULGE</button>
		</div>
	</div>
	<div>
		<a href="">
			<img src="images/pic6.jpg" alt="">
			<h3>BRANDED SHOES</h3>
		</a>
		<div class="price">
				<p>￥300.00</p>
			</div>
			<div>
				<button class="btn b1">INDULGE</button>
			</div>
	</div>

	<div>
		<a href="">
			<img src="images/pic3.jpg" alt="">
			<h3>BRANDED SHOES</h3>
		</a>
		<div class="price">
				<p>￥300.00</p>
			</div>
			<div>
				<button class="btn b1">INDULGE</button>
			</div>
	</div>
</div>

<!-- 底部 -->
<div id="footer"></div>


<script>
var b2s=document.getElementsByTagName("button")
for(var b2 of b2s){
b2.onclick=function(){
	open("detail.html","_self")
}
}
</script>
<script>
	var i=0;//现在正在显示第几张图片，从0开始
	var LIWIDTH=1690;//每个li的固定宽度
	var DURATION=800;//每次轮播动画持续的时间
	var LICOUNT=4;//li的总数
	// 移动ul
	var ulImgs=document.getElementById("ul-imgs");
	// 小圆点ul
	var ulIdxs=document.getElementById("ul-idxs");
	// 小圆点li
	var lis=ulIdxs.children;
	//从当前的位置移动到任意一个范围的位置
	function moveTo(to){
		//如果用户没有传入要跳转到第几张图，就默认跳转到当前的下一张
		if(to==undefined){
			to=i+1;
		}
		if(i==0){//如果滚动从头开始，再重新加上transition
			if(to>i){//如果要看当前位置右边的图片，是不会出问题的
				ulImgs.className="transition";
			}else{//只有i=0在开头，且还要看左边的图片才会出问题
				//为了避免以后再次看到偷梁换柱的效果，先把transition.className去掉
				ulImgs.className="";
				//将ulimgs拉取到最最侧
				ulImgs.style.marginLeft=-LICOUNT*LIWIDTH+"px";
				//定时器是为了将偷梁换柱操作和加回transition属性操作强行隔离开
				setTimeout(function(){
					moveTo(LICOUNT-1);
				},100);
				return; 
			}
		}
		i=to;//先将表示的第几张图片的变量变为目标位置
		//再用i计算ulimgs的marginLeft距离
		ulImgs.style.marginLeft=-i*LIWIDTH+"px";
		//先删除所有小圆点的class
		for(var li of lis){
			li.className="";
		}
		if(i==LICOUNT){//播放到最后一张
			i=0;
			//当transition动画播放完之后，才
			setTimeout(() => {
				ulImgs.className="";//清除transition属性
				ulImgs.style.marginLeft=0;//再将ulimgs拉回0位置
			}, DURATION);
		}
		//再给当前位置的小圆点添加class active
		lis[i].className="active";
	}

	//绑定按钮
	var btnLeft=document.getElementById("btn-left");
	var btnRight=document.getElementById("btn-right");
	//用开关，控制，上次动画没有播放完，下次动画不能开始
	var canClick=true;
	btnRight.onclick=function(){
		//调用两个按钮公共的移动方法，参数表示移动到的i+1的位置，相当于左移一个
		move(1)
	}
	//两个按钮共用的移动函数，n传入1时，移动到i+1位置，左移动。n传入-1时，移动到i-1位置，右移
	function move(n){
		if(canClick){//只有可以单击时
			moveTo(i+n);//才调用真正移动ul的方法
			canClick=false;//马上把开关关上，禁止再次点击
			//只有本地transition动画播放完，才能自动打开开关，点击按钮才有反应
			setTimeout(function(){
				canClick=true;
			},DURATION+100);
		}
	}
	btnLeft.onclick=function(){
		move(-1);
	}

	//自动轮播
	var interval=3000;
	var timer=setInterval(function(){
		moveTo();
	},interval);
	var banner=document.getElementById("banner");
	banner.onmouseover=function(){
		clearInterval(timer);
	}
	banner.onmouseout=function(){
		timer=setInterval(function(){
			moveTo();
		},interval)
	}

	//小圆点
	var ulIdxs=document.getElementById("ul-idxs");
	var canClick=true;
	ulIdxs.onclick=function(e){
		if(canClick){
			var li=e.target;
			if(li.nodeName=="LI"){
				if(li.className!=="active"){
					for(var i=0;i<lis.length;i++){
						if(lis[i]==li){
							break;
						}
					}
					moveTo(i);
					setTimeout(function(){
						canClick=true;
					},DURATION);
				}
			}
		}
	}
</script>
<script src="js/jquery-3.2.1.js"></script>
<script src="js/bootstrap.js"></script>
<script src="js/header.js"></script>
<script src="js/fooert.js"></script>
</body>
</html>
